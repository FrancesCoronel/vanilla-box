"use strict";var fetchedImages=[],numberOfImages=0,currentIndex=0,thumbnails=document.getElementById("thumbnails"),lightbox=document.getElementById("lightbox"),lightboxImage=document.getElementById("image"),lightboxImageTitle=document.getElementById("title"),lightboxPrevious=document.getElementById("previous"),lightboxNext=document.getElementById("next"),lightboxClose=document.getElementById("close"),googleCustomSearchAPI={key:"AIzaSyCEXyoz7_eNS34J8hEIfItph8TJF5dIWOg",url:"https://www.googleapis.com/customsearch/v1"},googleCustomSearchAPIConfig={cx:"013872130897346659415:yae-br_hnby",imgColorType:"color",imgSize:"xlarge",q:"vanilla+ice+cream",num:"9",searchType:"image"},imageRequestURL=googleCustomSearchAPI.url+"?q="+googleCustomSearchAPIConfig.q+"&cx="+googleCustomSearchAPIConfig.cx+"&key="+googleCustomSearchAPI.key+"&num="+googleCustomSearchAPIConfig.num+"&searchType="+googleCustomSearchAPIConfig.searchType+"&imgSize="+googleCustomSearchAPIConfig.imgSize+"&imgColorType="+googleCustomSearchAPIConfig.imgColorType,showLoader=function e(t){if(t){var o=document.createElement("div");o.className="loader",t.appendChild(o)}},hideLoader=function e(t){if(t){var o=document.querySelector('.thumbnail[data-id="'+t.getAttribute("data-id")+'"] div.loader');t.removeChild(o)}},fetchAllImages=function e(){var t=new XMLHttpRequest;t.onreadystatechange=function(e){if(4===t.readyState&&200===t.status){var o=JSON.parse(t.responseText);fetchedImages=fetchedImages.concat(o.items),o.items?o.items.map(function(e){loadThumbnail(numberOfImages),loadThumbnailImage(e,numberOfImages),numberOfImages++}):console.error("Error fetching images from API: ",e)}},t.onerror=function(){return console.error(t.statusText)},t.open("GET",imageRequestURL),t.send(null)},loadThumbnail=function e(t){var o=document.createElement("div");o.className="thumbnail",o.setAttribute("data-id",t),thumbnails.appendChild(o)},loadThumbnailImage=function e(t,o){var n=document.querySelector('.thumbnail[data-id="'+o+'"]');showLoader(n);var i=new Image;i.onload=function(){n.appendChild(i),hideLoader(n)},i.src=t.link,i.alt=t.title,i.onclick=function(){return loadLightboxView(o)}},loadLightboxView=function e(t){currentIndex=t,lightbox.classList.remove("hide"),lightboxImage.src=fetchedImages[t].link,lightboxImageTitle.innerHTML=fetchedImages[t].title},loadLightboxButtons=function e(){lightboxPrevious.onclick=function(){return navigateLightboxView(-1)},lightboxNext.onclick=function(){return navigateLightboxView(1)},lightboxClose.onclick=function(){return closeLightboxView()}},navigateLightboxView=function e(t){-1!==t&&1!==t||(lightboxImage.src="",currentIndex+=t,currentIndex>fetchedImages.length-1&&(currentIndex=0),currentIndex<0&&(currentIndex=fetchedImages.length-1),loadLightboxView(currentIndex))},closeLightboxView=function e(){lightbox.classList.add("hide"),lightboxImage.src="",lightboxImageTitle.innerHTML=""};fetchAllImages(),loadLightboxButtons();